% !TeX root = ./main.tex

\section{はじめに}

% what and good
プログラミング言語Juliaは，Pythonのような動的型付けの高水準言語が提供するような柔軟な記述性と，Cのような静的型付けの低水準言語を書くことで得られるようなパフォーマンスを両立することを目指して作られた，オープンソースの汎用言語である．

非常に簡潔なシンタックスを用いて書かれたジェネリックな関数は，型推論やLLVMフレームワークを用いたJITコンパイルにより最適化される．プログラマはプロトタイプに用いたスクリプトのまま良好なパフォーマンスを得ることができるため，"two-language-problem"\footnotemark を根本的に解決することができる言語として注目されており，特に科学計算の場面を中心に既に多くのユーザーを獲得している．
% TODO:　コミュニティの広がりを示すリファレンスを追加する
またレイヤーの抽象度を問わず一貫してシンプルな仕組みを用いるその設計思想は，結果として開発の容易さと拡張性の高さをもたらしており，2012年に発表された比較的新しい言語であるにも関わらず，既にそのコミュニティは大きな広がりを見せている．

\footnotetext{
  科学計算の場面において，開発の初期段階のプロトタイピングにおいては，記述が容易な高水準の動的型付け言語を用いることが多いが，
  開発が進むにつれて，もともとパフォーマンスを念頭において設計されていない動的言語のままでは期待するパフォーマンスを得られなくなり，
  結果として，CやFortranなど低級の静的型付け言語にプログラムを書き直さなくてはならなくなることが多い．
  このプログラマの生産性と，プログラムの効率性の両立におけるジレンマを，
  Bezanson, Karpinski, Shah, Edelmanら（2012, p67)は"two langauge problem"\cite{Julia-2017}と表現している．
}

% bad and motivation
一方で，Juliaプログラムに含まれるエラーを実行する前に検出するのは難しい．
というのも，Juliaはあくまで動的型付けの言語であり，その言語機能としてJuliaプログラムの安全性を何らかの形で静的に保証する機能は備わっていないからである．
今後Juliaがさらに普及し，Juliaで書かれたソフトウェアの規模が大きくになるにつれ，この問題がさらに深刻になり得ることは，産業ソフトウェアとして現在広く使われている他の動的言語における同様の問題意識を鑑みれば明らかであるが，現行のエコシステムにおいては例えば単なる typo の検出でさえも正確に行うことは簡単ではない．

% what we've achived
このような問題意識の下，本論文では，Juliaプログラムに対する静的解析手法の１つとして，Juliaの型推論機能を用いてプログラムを実行せずにプログラムを検査する「型プロファイラ」を提案する．
この型プロファイラは静的解析のための追加的な型アノテーションを必要とせず，素のJuliaプログラムに対して解析を行うことができ，バグの検出やパフォーマンスの向上に有用な情報を引き出す．
% TODO: 言い方を少し変えたい
% XXX: ほんとに performance 得られる ?
また，解析に用いられる型推論のルーチンはJuliaの言語機能の核をなすものであり，それ自体が既に実用上のJITコンパイルに耐え得るパフォーマンスを備えているため，結果として本論文で提案する型プロファイラもスケーラビリティを保ちつつ，十分に実用的なエラーの検査機能を実現することができた．

% structure of this thesis
本論文では，その取り組みについて以下の構成で説明する．
まず2節では，Juliaの特徴と性質を概観し，ランタイムによらない静的解析器の必要性を確認した後，Julia以外の動的型付け言語における静的解析の取り組みを紹介する．
次の3節でJuliaの型推論を用いた型プロファイリングによる静的解析器を提案し，まずJuliaの言語機能として実装されている型推論システムについて確認した後，そのルーチンを内部的に再利用する型プロファイラの設計方針を説明し，最後に型プロファイラの性能について簡単な証明を行う． % XXX: 証明できるかな
4節では型プロファイラの評価を行い，本論文で提案する型プロファイラが十分に実用的であることを示すとともに，現状で把握できている課題についても報告する．
最後の5節で本論文をまとめ，本プロジェクトの今後について述べる．
